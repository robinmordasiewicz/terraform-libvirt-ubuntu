#cloud-config
# vim: syntax=yaml
package_update: true
package_upgrade: true
hostname: workstation
fqdn: workstation.example.com
prefer_fqdn_over_hostname: true
power_state:
  mode: reboot
package_reboot_if_required: True
ssh_pwauth: true
password: ubuntu
apt:
  sources:
      kubernetes:
          source: "deb [arch=amd64] https://apt.kubernetes.io/ kubernetes-xenial main"
          keyid: "B53DC80D13EDEF05"
      docker: 
          source: "deb [arch=amd64] https://download.docker.com/linux/ubuntu jammy stable"
          keyid: "8D81803C0EBFCD88"
          key: |
            -----BEGIN PGP PUBLIC KEY BLOCK-----
            
            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
            YT90qFF93M3v01BbxP+EIY2/9tiIPbrd
            =0YYh
            -----END PGP PUBLIC KEY BLOCK-----
      github-cli:
          source: "deb [arch=amd64] https://cli.github.com/packages stable main"
          keyid: "23F3D4EA75716059"
          key: |
            -----BEGIN PGP PUBLIC KEY BLOCK-----
            
            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
            CzImhk/Y15k1PO8YY8M=
            =g+ce
            -----END PGP PUBLIC KEY BLOCK-----
      hashicorp:
          source: "deb [signed-by=$KEY_FILE] https://apt.releases.hashicorp.com jammy main"
          keyid: "AA16FCBCA621E701"
byobu_by_default: enable-system
system_info:
  default_user:
    name: ubuntu
    home: /home/ubuntu
    lock_passwd: false
    sudo: ALL=(ALL) NOPASSWD:ALL
    shell: /bin/zsh
    groups: [adm, audio, cdrom, dialout, floppy, video, plugdev, dip, netdev, libvirtd, docker]
users:
  - default
packages:
  - qemu-guest-agent
  - vim
  - git
  - zsh
  - software-properties-common
  - gnupg2
  - curl
  - apt-transport-https 
  - gnupg-agent
  - ca-certificates
  - lsb-release
  - bash-completion
  - wget
  - jq
  - yamllint
  - moreutils
  - python3-sphinx
  - python3-pip
  - python3.9
  - build-essential
  - fonts-powerline
  - powerline
  - fzf
  - speedtest-cli
  - kubectl
  - docker-ce
  - gh
  - terraform
runcmd:
  - [ systemctl, daemon-reload ]
  - [ systemctl, enable, qemu-guest-agent ]
  - [ systemctl, start, qemu-guest-agent ]
  - [ systemctl, restart, systemd-sysctl ]
  - systemctl enable docker
  - systemctl start docker
  - curl -LO "https://vesio.azureedge.net/releases/vesctl/$(curl -s https://downloads.volterra.io/releases/vesctl/latest.txt)/vesctl.linux-amd64.gz"
  - gunzip vesctl.linux-amd64.gz
  - mv vesctl.linux-amd64 /usr/local/bin/vesctl
  - chown root:root /usr/local/bin/vesctl
  - chmod 755 /usr/local/bin/vesctl
  - vesctl completion bash > /etc/bash_completion.d/vesctl > /dev/null
  - pip3 install sphobjinv
  - 'usermod -u 502 ubuntu'
  - 'groupmod -g 20 ubuntu'
write_files:
  - path: /etc/sysctl.d/10-disable-ipv6.conf
    permissions: '0644'
    owner: root
    content: |
      net.ipv6.conf.all.disable_ipv6 = 1
      net.ipv6.conf.default.disable_ipv6 = 1
      net.ipv6.conf.lo.disable_ipv6 = 1
ansible:
  install_method: distro
  package_name: ansible
  run_user: ubuntu
  galaxy:
    actions:
      - ["ansible-galaxy", "install", "gantsign.oh-my-zsh"]
  pull:
    url: "https://github.com/robinmordasiewicz/linux-userland.git"
    playbook_name: "userland.yml"
